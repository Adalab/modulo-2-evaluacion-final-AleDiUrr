{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst buttonSearch = document.querySelector('.js-search-btn');\nconst cocktailInput = document.querySelector('.js-cocktail-input');\nconst list = document.querySelector('.js-result-list');\nconst listFavs = document.querySelector('.js-favs-list');\nconst deleteBtn = document.querySelector('.js-reset-btn');\nlet drinks = [];\nlet favorites = [];\n\nfunction deleteFavs() {\n  localStorage.removeItem('favorites');\n}\n\nfunction handleListenReset(event) {\n  event.preventDefault();\n  deleteFavs();\n}\n\nfunction listenClickReset(event) {\n  event.preventDefault;\n  deleteBtn.addEventListener('click', handleListenReset);\n}\n\nfunction getFavoritesfromLocalStorage() {\n  const favsListStored = JSON.parse(localStorage.getItem('favorites'));\n\n  if (favsListStored) {\n    favorites = favsListStored;\n    renderFavsDrinks();\n  } else {\n    dataFromApi();\n  }\n}\n\nfunction setFavoritestoLocalStorage() {\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n}\n\nfunction renderFavsDrinks() {\n  let html = '';\n  if (favorites.length === 0 || favorites === null) {\n    html += `Any fav?'`;\n  } else {\n    for (const favorite of favorites) {\n      html += `<li class=\"fav_item_list js_fav_item\" id=\"${favorite.id}\">`;\n      html += `<h2\">${favorite.name}</h2>`;\n      if (favorite.img === null) {\n        html += `<img class=\"drink_img\" src=\"./assets/images/strawberry-cocktail-m.jpg\" alt=\"cocktail-photo\">`;\n      } else {\n        html += `<img class=\"drink_img\" src=\"${favorite.img}\" alt=\"cocktail-photo\">`;\n      }\n      html += `</li>`;\n    }\n  }\n  listFavs.innerHTML = html;\n  deleteFavs();\n}\n\nfunction handleClickResults(event) {\n  const drinkIdClickled = event.currentTarget.id;\n  const foundDrink = drinks.find((fav) => fav.id === drinkIdClickled);\n\n  const foundFavoriteDrinkIndex = favorites.findIndex((fav) => {\n    return fav.id === drinkIdClickled;\n  });\n  if (foundFavoriteDrinkIndex === -1) {\n    favorites.push(foundDrink);\n  } else {\n    favorites.splice(foundFavoriteDrinkIndex, 1);\n  }\n  renderDrinkList(drinks);\n  renderFavsDrinks();\n  setFavoritestoLocalStorage();\n}\n\nfunction listenerliResults() {\n  const liResults = document.querySelectorAll('.js-result');\n  for (const itemResult of liResults) {\n    itemResult.addEventListener('click', handleClickResults);\n  }\n}\n\nfunction renderDrinkList(drinks) {\n  let html = '';\n  let favStyle = '';\n\n  for (const drink of drinks) {\n    const foundFavoriteDrinkIndex = favorites.findIndex((fav) => {\n      return fav.id === drink.id;\n    });\n\n    console.log(foundFavoriteDrinkIndex);\n    if (foundFavoriteDrinkIndex !== -1) {\n      favStyle = 'is_fav';\n    } else {\n      favStyle = '';\n    }\n    html += `<li class=\"result_item_list js-result ${favStyle}\" id=\"${drink.id}\">`;\n\n    if (drink.img === null || drink.img === undefined) {\n      html += `<img class=\"drink_img\" src=\"./assets/images/strawberry-cocktail-m.jpg\" alt=\"cocktail-photo\"/>`;\n    } else {\n      html += `<img class=\"drink_img\" src=\"${drink.img}\" alt= cocktail-photo/>`;\n    }\n    html += `<h2>${drink.name}</h2>`;\n    html += `</li>`;\n  }\n  list.innerHTML = html;\n  listenerliResults();\n}\n\nfunction dataFromApi() {\n  const cocktail = cocktailInput.value;\n  const url_server = `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${cocktail}`;\n\n  fetch(url_server)\n    .then((resp) => resp.json())\n    .then((data) => {\n      drinks = data.drinks.map((coctel) => {\n        const newCoctel = {\n          id: coctel.idDrink,\n          name: coctel.strDrink,\n          img: coctel.strDrinkThumb,\n        };\n        return newCoctel;\n      });\n      renderDrinkList(drinks);\n      setFavoritestoLocalStorage();\n    });\n}\n\nfunction handleClicKSearchDrink(event) {\n  event.preventDefault();\n  dataFromApi();\n}\n\ngetFavoritesfromLocalStorage();\n\nbuttonSearch.addEventListener('click', handleClicKSearchDrink);\n"]}