"use strict";const buttonSearch=document.querySelector(".js-search-btn"),cocktailInput=document.querySelector(".js-cocktail-input"),list=document.querySelector(".js-result-list"),listFavs=document.querySelector(".js-favs-list"),deleteBtn=document.querySelector(".js-reset-btn");let drinks=[],favorites=[];function deleteFavs(){localStorage.removeItem("favorites")}function handleListenReset(e){e.preventDefault(),deleteFavs()}function listenClickReset(e){e.preventDefault,deleteBtn.addEventListener("click",handleListenReset)}function getFavoritesfromLocalStorage(){const e=JSON.parse(localStorage.getItem("favorites"));e?(favorites=e,renderFavsDrinks()):dataFromApi()}function setFavoritestoLocalStorage(){localStorage.setItem("favorites",JSON.stringify(favorites))}function renderFavsDrinks(){let e="";if(0===favorites.length||null===favorites)e+="Any fav?'";else for(const t of favorites)e+=`<li class="fav_item_list js_fav_item" id="${t.id}">`,e+=`<h2">${t.name}</h2>`,null===t.img?e+='<img class="drink_img" src="./assets/images/strawberry-cocktail-m.jpg" alt="cocktail-photo">':e+=`<img class="drink_img" src="${t.img}" alt="cocktail-photo">`,e+="</li>";listFavs.innerHTML=e,deleteFavs()}function handleClickResults(e){const t=e.currentTarget.id,i=drinks.find(e=>e.id===t),s=favorites.findIndex(e=>e.id===t);-1===s?favorites.push(i):favorites.splice(s,1),renderDrinkList(drinks),renderFavsDrinks(),setFavoritestoLocalStorage()}function listenerliResults(){const e=document.querySelectorAll(".js-result");for(const t of e)t.addEventListener("click",handleClickResults)}function renderDrinkList(e){let t="",i="";for(const s of e){const e=favorites.findIndex(e=>e.id===s.id);console.log(e),i=-1!==e?"is_fav":"",t+=`<li class="result_item_list js-result ${i}" id="${s.id}">`,null===s.img||void 0===s.img?t+='<img class="drink_img" src="./assets/images/strawberry-cocktail-m.jpg" alt="cocktail-photo"/>':t+=`<img class="drink_img" src="${s.img}" alt= cocktail-photo/>`,t+=`<h2>${s.name}</h2>`,t+="</li>"}list.innerHTML=t,listenerliResults()}function dataFromApi(){const e=cocktailInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{drinks=e.drinks.map(e=>({id:e.idDrink,name:e.strDrink,img:e.strDrinkThumb})),renderDrinkList(drinks),setFavoritestoLocalStorage()})}function handleClicKSearchDrink(e){e.preventDefault(),dataFromApi()}getFavoritesfromLocalStorage(),buttonSearch.addEventListener("click",handleClicKSearchDrink);